# 프로젝트명: 순환신경망 이용한 작사기 만들기

RNN과 LSTM을 이용한 작사기 만들기

### 목표
- 그럴듯한 문장으로 생성하기

- 전처리 잘 하기

- validation loss 2.2이하로 맞추기
_________________________________________________________________________________
### 1. 어려웠던 점
-간단한 이론에 프로젝트가.. 헬이었다...   
-작사에 사용되는 문장은 대부분 단문이다. 따라서 토크나이즈 한 문장 중 토큰 개수가 15개가 넘는 문장은 필요하지 않아 제거하는 과정이 필요했다. 이 작업을 어떤 순서에 넣고, 어떻게 문장을 불러와 지워야 할 지 방법을 찾는 것이 어려웠다.


### 2. 프로젝트 후 애매하거나 알게된 점
##### 1) 애매한 점   
-아직 training set 개수가 lms에 제공된 124960


### 3. 난관을 극복하자
##### 1)토큰 개수가 15개 넘어가는 문장 제거하기
-토큰 개수가 15개 넘는 문장은 삭제하라는 조건이 있었다. 처음에는 전처리 정규식에서 토큰 개수가 15개 넘는 경우를 제거할 생각이었다.   
```python
if len(sentence.split()) > 15 :
    sentence = ''
```   
하지만 이 문장으로 하게 될 경우 문장이 기준 문장보다 초과하게 되었다. 아무래도 불필요한 문장을 지우지 않고 공백으로 두어서 그런 것 같았다.그래서 입력되는 문장을 지우는 방법을 하려 했지만 문장을 불러온 데이터베이스에 어떻게 접근해야 하는 지 아이디어가 떠오르지 않았다.   
이후 시도한 방법은  corpurs에 정제된 문장을 담을 때 토큰이 15개 넘는 단어는 countinue로 지나가게 했다.   
```python
if len(sentence.split()) >15: continue
```   
처음에는 코드를 위치를 잘못 지정해서 정규식을 거치지 않은 문장 중 토큰이 15개 넘는 경우 포함시키지 않는다고 했다. 그랬더니 데이터 수가 1/10로 줄어버리는 대참사가 발생하고 오랫동안 다시 코드를 살펴봐야했다.   
코드가 들어가야 할 자리는 정규식을 거쳐 기본적으로 정제가 된 문장이 copurs 리스트에 들어가기 전 위치였다. 이렇게 진행했더니 기준 문장보다 부족하지만 기준문장인 약 12만개는 넘지 않았다.   
```python
for sentence in raw_corpus:
    # 우리가 원하지 않는 문장은 건너뜁니다
    if len(sentence) == 0: continue
    if sentence[-1] == ":": continue
    ->여기에 넣었더니 데이터 수가 1/10으로 줄어버림
    
    # 정제하기
    preprocessed_sentence = preprocess_sentence(sentence)
    if len(preprocessed_sentence.split()) >=15: ->여기에 들어가야 정상 작동
        continue #토큰 15개 초과할 경우 패스 
    else: corpus.append(preprocessed_sentence) #아닐경우 corpurs 리스트에 넣기
```   
### 4. 아직 더 해볼 것
##### 1) 한국어 copurs 사용해보기   
  -이번 프로젝트에서 사용한 corpurs는 영어 기반이다. 한국어 corpusr를 다운받아서 한국어 작사기도 만들어보고 싶다.   
##### 2) generate 출력값 다듬기   
  -generate로 나온 출력값에는 시작과 끝 토큰도 함께 포함되어 출력된다. 이를 가독성 좋게 바꾸면 좋겠다.
  
### 프로젝트 결론